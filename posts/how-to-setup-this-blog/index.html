<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#fe0002}</style><title>How To Setup This Blog</title><meta name=description content="DevOps and Life"><meta name=keywords content="blog,gokarna,hugo,devops,tech,documentation,how-to,github,pages,markdown"><meta property="og:url" content="https://kryptoncode.com/posts/how-to-setup-this-blog/"><meta property="og:type" content="website"><meta property="og:title" content="How To Setup This Blog"><meta property="og:description" content="DevOps and Life"><meta property="og:image" content="/images/avatar.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="How To Setup This Blog"><meta name=twitter:description content="DevOps and Life"><meta property="twitter:domain" content="https://kryptoncode.com/posts/how-to-setup-this-blog/"><meta property="twitter:url" content="https://kryptoncode.com/posts/how-to-setup-this-blog/"><meta name=twitter:image content="/images/avatar.jpg"><link rel=canonical href=https://kryptoncode.com/posts/how-to-setup-this-blog/><link rel=stylesheet type=text/css href=https://kryptoncode.com/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=https://kryptoncode.com/css/main.css><link disabled id=dark-theme rel=stylesheet href=https://kryptoncode.com/css/dark.css><script src=https://kryptoncode.com/js/svg-injector.min.js></script>
<script src=https://kryptoncode.com/js/feather-icons.min.js></script>
<script src=https://kryptoncode.com/js/main.js></script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://kryptoncode.com><img src=https://kryptoncode.com/images/avatar.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://kryptoncode.com>Krypton Code</a></div><div class=nav-links><div class=nav-link><a href=https://kryptoncode.com/posts/>Posts</a></div><div class=nav-link><a href=https://kryptoncode.com/tags/>Tags</a></div><div class=nav-link><a href=https://kryptoncode.com/about/>About</a></div><div class=nav-link><a href=https://github.com/radarsymphony><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://kryptoncode.com/posts/>Posts</a></li><li class=nav-item><a href=https://kryptoncode.com/tags/>Tags</a></li><li class=nav-item><a href=https://kryptoncode.com/about/>About</a></li><li class=nav-item><a href=https://github.com/radarsymphony><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>How To Setup This Blog</h1><small role=doc-subtitle></small><p class=post-date>February 5, 2023</p><ul class=post-tags><li class=post-tag><a href=https://kryptoncode.com/tags/how-to>how-to</a></li><li class=post-tag><a href=https://kryptoncode.com/tags/hugo>hugo</a></li><li class=post-tag><a href=https://kryptoncode.com/tags/github>github</a></li><li class=post-tag><a href=https://kryptoncode.com/tags/pages>pages</a></li><li class=post-tag><a href=https://kryptoncode.com/tags/blog>blog</a></li><li class=post-tag><a href=https://kryptoncode.com/tags/markdown>markdown</a></li></ul></div><div class=post-content><p><h1 id=overview>Overview</h1><p>This guide outlines the steps required to create a minimal blog like this one. This blog leverages <a href=https://pages.github.com/>Github Pages</a> and <a href=https://gohugo.io/>Hugo</a> to render <a href=https://www.markdownguide.org/>markdown</a> pages as blog posts and apply the <a href=https://github.com/526avijitgupta/gokarna>Gokarna</a> theme.</p><p>The steps will begin with setting up an account on <a href=https://github.com>github.com</a> and run through to deploying the site via a github workflow. I may create another post about adding the ability for your readers to comment on a post.</p><h2 id=requirements>Requirements</h2><ul><li>Familiarity with CLI</li><li>Ability to install <code>hugo</code> and <code>git</code> on your machine</li><li>Text Editor (I may look at a adding a CMS, like <a href=https://www.netlifycms.org>Netlify</a> in another post.)</li></ul><h1 id=github-setup>Github Setup</h1><ol><li><a href=https://github.com/login>Login to github.com</a> or <a href=https://github.com/signup>Create a new account</a>.</li><li>Create a new repository. <em>(In the upper right corner, click the <strong>&rsquo;+&rsquo;</strong> > <strong>New repository</strong>.)</em></li><li>Name the repository <strong>[your_username].github.io</strong> (e.g., <em>tombombadil.github.io</em>).</li><li>Verify repository is <strong>Public</strong>.</li><li>Click <strong>Create repository</strong>.</li></ol><h1 id=software>Software</h1><p>Before you can deploy your site, you will need to install <code>hugo</code> and <code>git</code>.</p><h2 id=install-hugo>Install Hugo</h2><p>The installation instructions differ depending on the OS you are using. Please refer to Hugo&rsquo;s <a href=https://gohugo.com.cn/getting-started/installing/>official documentation</a> for how to install <code>hugo</code>.</p><p>Your process might look something like:</p><ol><li>Open a terminal.</li><li>Install the package with <code>sudo pacman -S hugo</code> or <code>sudo apt-get install hugo</code>.</li><li>Confirm <code>hugo</code> is installed <code>hugo version</code>.</li></ol><p>There is a <a href=https://hub.docker.com/r/klakegg/hugo/>Docker image</a> available, if you&rsquo;d prefer to add an alias to your <code>.bashrc</code>:</p><pre tabindex=0><code>alias hugo=&#39;docker run --rm -it -v $(pwd):/src klakegg/hugo:latest shell&#39;
</code></pre><h2 id=install-git>Install Git</h2><p>The installation instructions differ depending on the OS you are using. Please refer to Git&rsquo;s <a href=https://git-scm.com/book/en/v2/Getting-Started-Installing-Git>official documentation</a> for how to install <code>git</code>.</p><p>Your process might look something like:</p><ol><li>Open a terminal.</li><li>Install the package with <code>sudo pacman -S git</code> or <code>sudo apt-get install git</code>.</li><li>Confirm <code>git</code> is installed <code>git --version</code>.</li></ol><h1 id=setup-local-project>Setup Local Project</h1><ol><li>Open a terminal.</li><li>Navigate to the folder that will store your blog&rsquo;s files, e.g., <code>${HOME}/src/github.com/</code></li><li>Run <code>hugo new site [your-site-name]</code>.</li><li>Navigate into your project <code>cd !!</code>.</li><li>Run <code>hugo new posts/hello-world.md</code> to create a new blog post.</li></ol><p>Also consider choosing a <a href=https://themes.gohugo.io/>Hugo theme</a>. This site uses <a href=https://github.com/526avijitgupta/gokarna>Gokarna</a>.</p><h2 id=add-git>Add Git</h2><p>You already installed <code>git</code>. To track changes to our source code and make deploying to github pages easy, let&rsquo;s turn our project folder into a git repo.</p><ol><li>From within your project folder, run <code>git init</code>.</li><li>Add a theme to your project <code>git submodule add https://github.com/526avijitgupta/gokarna.git themes/gokarna</code>.</li></ol><h2 id=configure-the-theme>Configure the Theme</h2><p>In addition to <a href=https://gohugo.io/documentation/>Hugo configuration options</a>, each theme may have its own theme-specific options. If you chose the Gokarna theme, they have <a href=https://main--gokarna-hugo.netlify.app/posts/theme-documentation-basics/>great documentation on their example site</a>. You can also checkout <a href=https://github.com/radarsymphony/radarsymphony.github.io/blob/main/config/_default/config.toml>the configuration file</a> for this site.</p><h1 id=develop-the-site>Develop the Site</h1><p>Pages can be written in pure HTML (change file extension to .html) or the much lighter simpler <a href=markdownguide.org/>Markdown</a>. To start adding pages, you would:</p><ol><li>Run <code>hugo new posts/[post-name-here].md</code>.</li><li>Open <code>[project_root]/content/posts/[post-name-here].md</code> to start editing the page.</li></ol><p>When you create a new page with <code>hugo</code>, it will add some default &ldquo;metadata&rdquo; at the top. This metadata sets the title of the page, the publish date,When you create a new page with <code>hugo</code>, it will add some default &ldquo;metadata&rdquo; at the top. This metadata sets the Title of the page, the publish date, whether the current page is a &ldquo;draft&rdquo; (drafts are not published). Hugo and the theme you chose will also allow you to add more metadata. The metadata for this page is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;How To Setup This Blog&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>date</span>: <span style=color:#e6db74>2023-01-29T10:00:23</span><span style=color:#ae81ff>-08</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span><span style=color:#f92672>draft</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>post</span>
</span></span><span style=display:flex><span><span style=color:#f92672>showTableOfContents</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>tags</span>: [<span style=color:#e6db74>&#34;how-to&#34;</span>, <span style=color:#e6db74>&#34;hugo&#34;</span>, <span style=color:#e6db74>&#34;github&#34;</span>, <span style=color:#e6db74>&#34;pages&#34;</span>, <span style=color:#e6db74>&#34;blog&#34;</span>, <span style=color:#e6db74>&#34;markdown&#34;</span> ]
</span></span></code></pre></div><p>You can also create &ldquo;pages&rdquo; as a <code>type</code>, include a Table of Contents, and add tags in Gokarna. See <a href=https://main--gokarna-hugo.netlify.app/posts/theme-documentation-advanced/#content-types>Gokarna docs</a> for more info.</p><p>To see how your page will look when it&rsquo;s published, launch Hugo&rsquo;s built-in server.</p><ol><li>Navigate to the project folder,</li><li>Run <code>hugo server</code>.</li></ol><p>Alternatively, I prefer running the <code>hugo server</code> with a few additional options.</p><pre tabindex=0><code>hugo server --environment staging --buildDrafts --navigateToChanged
</code></pre><p>You can find an explanation of these options and additional options for the server <a href=https://gohugo.io/commands/hugo_server/#options>here</a> on the Hugo site.</p><p>When you are satisfied with your page, change the <code>draft</code> status to &ldquo;false&rdquo; and run <code>hugo</code> in your project root, which will build all of the static files for your site and put them in the &ldquo;public&rdquo; directory.</p><h1 id=deploy-the-site>Deploy the Site</h1><p>To make your site live, you have a few options. The quick way is to copy the <code>./public</code> folder (with the files generated by running <code>hugo</code>) and initialize a new git repo for that folder. You can would then add your github-pages repo (created above).</p><p>The other option is to setup a github workflow that builds the site when you push to the main branch and places the built files in a separate branch from which to serve the site.</p><p>I use the second method for this site.</p><h2 id=setup-github-workflows>Setup Github Workflows</h2><p>While I found several articles that outlined how to setup the workflow, the easiest to follow was <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#build-hugo-with-github-action>the method on the Hugo website</a>. Their instructions use the github action created by <a href=https://github.com/peaceiris/actions-gh-pages>peaceiris</a>.</p><p>I recommend following that guide to setup the workflow. It is clear and avoids the need to setup additional github SECRETS as it automatically generates a token for you. My first &ldquo;push&rdquo; using that workflow did not serve the site correctly. I had forgotten to <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#github-pages-setting>make a <code>gh-pages</code> branch and set it as the branch to serve the site from</a>. Once I set the correct branch and re-deployed, the site was published as expected.</p><p>You will also need to add your github repository as your &ldquo;remote&rdquo; if you haven&rsquo;t done so yet. You can by:</p><ol><li>Navigate to the project root of your site,</li><li><code>git remote add origin https://github.com/username/username.github.io.git</code></li><li>Confirm <code>git remove -v</code></li></ol><pre tabindex=0><code>origin  https://github.com/username/username.github.io.git (fetch)
origin  https://github.com/username/username.github.io.git (push)
</code></pre><p>Then, to deploy the site:</p><ol><li>Run <code>git commit -am "[your message about the current changes]"</code></li><li>Run <code>git push</code></li></ol><p>That&rsquo;s it! That&rsquo;s all you need for a simple blog site. You should now be able to view your site at <code>https://github.com/username/username.github.io</code>. If you&rsquo;d like to add a custom domain, I will give some pointers in the remaining sections.</p><h1 id=add-custom-domain>Add Custom Domain</h1><p>In order to direct a custom domain to your github pages, you will need a few things:</p><ul><li>A custom domain</li><li>Access to that domain&rsquo;s DNS records (I used cloudflare)</li><li>Time (updating the DNS records can take some time)</li></ul><h2 id=configure-github>Configure Github</h2><p>The first step is to <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site?platform=linux#configuring-a-subdomain">add a custom domain to the github repository</a> hosting your site. To do that:</p><ol><li>Navigate to your repo&rsquo;s settings.</li><li>Under <strong>Code and automation</strong>, Select <strong>Pages</strong></li><li>Enter your custom domain and click save.</li></ol><p>I&rsquo;d recommend starting with a subdomain like &ldquo;blog.example.com&rdquo; or &ldquo;<a href=https://www.example.com>www.example.com</a>&rdquo; as not all DNS providers will allow you to direct the apex domain to github pages.</p><p>In addition to adding the subdomain to your repository&rsquo;s settings, you want to &ldquo;verify&rdquo; your domain. I found <a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages>Github&rsquo;s documentation</a> on how to do this quite clear, so I&rsquo;d recommend following that guide.</p><h2 id=configure-dns>Configure DNS</h2><ol><li>Login to your DNS provider.</li><li>Add a CNAME record that points to [sub].example.com</li><li>(optional) Temporarily set low TTL to see changes more quickly as you are setting things up.</li></ol><h2 id=changes-to-site-files>Changes to Site files</h2><p>In addition to setting things up on Github and with your DNS provider, you need to adjust some files in your repo.</p><h3 id=cname>CNAME</h3><p>You need to create a CNAME file that will be served at your project root. Hugo creates your project root dynamically, so we can&rsquo;t add that file directly to <code>./public</code>. Instead,</p><ol><li>Navigate to your project root.</li><li>If you don&rsquo;t have a <code>./static/</code> directory, make it <code>mkdir ./static</code></li><li>Add a file called <code>CNAME</code> (no extension) under <code>./static/</code></li><li>Inside that file, add the full custom domain you added to you Github pages settings.</li><li>Save.</li></ol><h3 id=configtoml>config.toml</h3><p>You will also need to update the base URL for your site. To do so,</p><ol><li>Open your <code>config.toml</code> file (e.g., <code>./config/_default/config.toml</code>)</li><li>Update any references to your site&rsquo;s URL.</li><li>Save.</li></ol><p>In Gokarna, you just need to update <code>baseURL</code> to equal the custom domain.</p><p>Commit your changes and push. Depending on how long your workflow takes and how long your DNS TTL is, you may have to wait a several minutes to see the final result.</p><h1 id=software-used>Software Used</h1><ul><li><a href=https://github.com/git/git>https://github.com/git/git</a></li><li><a href=https://github.com/gohugoio/hugo>https://github.com/gohugoio/hugo</a></li><li><a href=https://favicon.io/favicon-generator/>https://favicon.io/favicon-generator/</a></li><li><a href=https://github.com/526avijitgupta/gokarna>https://github.com/526avijitgupta/gokarna</a></li><li><a href=https://github.com/peaceiris/actions-gh-pages>https://github.com/peaceiris/actions-gh-pages</a></li><li><a href=https://github.com/radarsymphony/radarsymphony.github.io>https://github.com/radarsymphony/radarsymphony.github.io</a> (source for this site)</li></ul><h1 id=resources>Resources</h1><ul><li><a href=https://blog.hellohuigong.com/en/posts/how-to-build-personal-blog-with-github-pages-and-hugo/>https://blog.hellohuigong.com/en/posts/how-to-build-personal-blog-with-github-pages-and-hugo/</a></li><li><a href=https://dev.to/importhuman/deploy-hugo-website-using-github-pages-1mc5>https://dev.to/importhuman/deploy-hugo-website-using-github-pages-1mc5</a></li><li><a href=https://blog.mattdaines.me/p/adding-a-custom-domain-to-your-hugo-site-on-github-pages/>https://blog.mattdaines.me/p/adding-a-custom-domain-to-your-hugo-site-on-github-pages/</a></li><li><a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages>https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages</a></li><li><a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#use-a-custom-domain>https://gohugo.io/hosting-and-deployment/hosting-on-github/#use-a-custom-domain</a></li></ul></p></div><div class=prev-next></div></div><aside class=post-toc><nav id=toc><nav id=TableOfContents><ul><li><a href=#overview>Overview</a><ul><li><a href=#requirements>Requirements</a></li></ul></li><li><a href=#github-setup>Github Setup</a></li><li><a href=#software>Software</a><ul><li><a href=#install-hugo>Install Hugo</a></li><li><a href=#install-git>Install Git</a></li></ul></li><li><a href=#setup-local-project>Setup Local Project</a><ul><li><a href=#add-git>Add Git</a></li><li><a href=#configure-the-theme>Configure the Theme</a></li></ul></li><li><a href=#develop-the-site>Develop the Site</a></li><li><a href=#deploy-the-site>Deploy the Site</a><ul><li><a href=#setup-github-workflows>Setup Github Workflows</a></li></ul></li><li><a href=#add-custom-domain>Add Custom Domain</a><ul><li><a href=#configure-github>Configure Github</a></li><li><a href=#configure-dns>Configure DNS</a></li><li><a href=#changes-to-site-files>Changes to Site files</a><ul><li><a href=#cname>CNAME</a></li><li><a href=#configtoml>config.toml</a></li></ul></li></ul></li><li><a href=#software-used>Software Used</a></li><li><a href=#resources>Resources</a></li></ul></nav></nav></aside></main><footer class=footer><span>&copy; 2023 Krypton Code</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>